{% extends 'main.html' %} {% load static %} {% block style %}
<link rel="stylesheet" type="text/css" href="{% static 'styles/category/category.css' %}" />
{% endblock style %}
{% block title %}Manager Video{% endblock title %}
{% block content %}
{% if messages %}
{% for message in messages %}
{% if message.tags == 'success' %}
  <div id="alert-success" class="mt-2 alert alert-light-success color-success alert-dismissible show fade" role="alert">
    {{ message }}
    <button id="close_success" type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
{% elif message.tags == 'error' %}
  <div id="alert-error" class="mt-2 alert alert-light-danger color-danger alert-dismissible show fade" role="alert">
    {{ message }}
    <button id="close_danger" type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
{% endif %}

{% endfor %} 
{% endif %}
<div>
  <div class="taskbar_category">
    <h3>Video Manager For Admin</h3>
    <a type="button" style="margin-left:10px;" {% if choice  ==  "1" %} href="{% url 'videoapp:create' %}" {% else %}
    href="{% url 'managervideo:addvideo' pk=choice cat=cat %}" {% endif %}>
    <input type="image" style="width:10%; height:10%; align-center;" src="{% static 'styles/images/ic_add.png' %}"/></a>
  </div>
     
</div>
  <div class="taskbar_category">
      <select class="form-select btn btn-outline-primary" style="width:10%;" name="type" select="2" size="1"
      onchange="window.location.href =  this.value">
      <option value="{% url 'managervideo:managervideo' pk=1 cat=0 %}" {% if choice  ==  "1" %} selected='selected' {% endif %}>Video</option>
      <option value="{% url 'managervideo:managervideo' pk=2 cat=0 %}" {% if choice  ==  "2" %} selected="selected" {% endif %}>Live TV</option>
      <option value="{% url 'managervideo:managervideo' pk=3 cat=0 %}" {% if choice  ==  "3" %} selected="selected" {% endif %}>Radio</optoion>
      </select>
   
    <select class="form-select btn btn-outline-primary" style="width:14%; margin-left:10px;" name="cate" select="2" size="1"
      onchange="window.location.href =  this.value">
      <option value="{% url 'managervideo:managervideo' pk=choice cat=0 %}">All Category</option>
      {% for category in categories %}

      <option value="{% url 'managervideo:managervideo' pk=choice cat=category.cat_id %}" {% if category.cat_id == cat %}
        selected="selected" {% endif %}>{{category.cat_name}}</option>

      {% endfor %}
    </select>
    
      
    <div class="d-flex flex-row ms-auto" style="margin-right:2%">
      <form action="{% url 'managervideo:managervideo' pk=choice cat=cat %}" method="GET">
        <input class="input-group-text" type="text" name="q" placeholder="Search Video...." />
      </form>
    </div>
  </div>
        <div style="overflow:hidden">
          <div class="row">
            {% for video in videos %}
            <div class="" style=" width: 30vh;">
              <div class="card d-flex flex-row justify-content-start align-items-end" style="height: 35vh; transition: all 0.15s linear; background: linear-gradient(rgba(0,0,0,0.0), rgba(0,0,0,0.0), rgba(0,0,0,0.0), rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url({{video.vid_thumbnail}}) center center/cover no-repeat, url('https://images.unsplash.com/photo-1520549233664-03f65c1d1327?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=387&q=80') center center/cover no-repeat;">
                <div class="card-content" style="width:100%; ">
                    <div class="card-body" >
                      <div class=" d-flex flex-rowv justify-content-end">
                        <h5 class="card-title text-white">{{video.vid_title}}</h5>
                      </div>
                      
                      <div class="d-flex flex-row justify-content-end" >
                        <a class="me-1" data-bs-toggle="tooltip" data-bs-placement="top" title="Edit"  {% if choice  ==  "1" %} href="{% url 'videoapp:update' video.vid_id %}" {% else %}
                          href="{% url 'managervideo:editvideo' pk=choice cat=cat id=video.vid_id %}"  {% endif %}>
                        <img style = "width:24px; height:24px;"src="{% static 'styles/images/edit_video.png' %}" alt="">
                        </a>
                        <a href="{% url 'managervideo:disablevideo' pk=choice cat=cat id=video.vid_id  %}"  data-bs-toggle="tooltip" data-bs-placement="top" {% if video.vid_status  ==  1 %}title="Disable"{% else %}title="Enable"{% endif %}>
                          {% if video.vid_status  ==  1 %}  
                          <img  style = "width:24px; height:24px;"src="{% static 'styles/images/enable.png' %}" alt="">
                          {% else %}
                          <img style = "width:24px; height:24px;"src="{% static 'styles/images/disable.png' %}" alt="">
                          {% endif %}
                        </a>
                    </div>
                    
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}

    </div>
  </div>

  

    <div class="d-flex justify-content-center align-items-center" style="height:2%">
      <nav aria-label="Page navigation example ">
        <ul class="pagination">
          {% if videos.has_previous %}
          <li class="page-item"><a class="page-link" href="?page=1">&laquo First</a></li>
          <li class="page-item"><a class="page-link" href="?page={{videos.previous_page_number}}">Previous</a></li>
          {% endif %}
          {% for i in nums %}
          <li class="page-item"><a class="page-link" href="?page={{forloop.counter}}">{{forloop.counter}}</a></li>
          {% endfor %}
          {% if videos.has_next %}
          <li class="page-item"><a class="page-link" href="?page={{videos.next_page_number}}">Next</a></li>
          <li class="page-item"><a class="page-link" href="?page={{videos.paginator.num_pages}}">Last &raquo</a></li>
          {% endif %}
        </ul>
      </nav>
    </div>
</div>
<script>
  if (document.getElementById('close_success')!=null) {
    var check2 = document.getElementById('close_success');
    var alert2 = document.getElementById('alert-success');
    check2.addEventListener('click', function(e) {   
      alert2.classList.remove('show');
    });
  }
  if (document.getElementById('close_danger')!=null){
    var check1 = document.getElementById('close_danger');
    var alert1 = document.getElementById('alert-error');
    check1.addEventListener('click', function(e) {   
        alert1.classList.remove('show');
    });
  }
</script>
{% endblock content %}

  {% comment %} <div class="mt-5" style="margin-left:30px;">
    <div style="overflow:hidden">
      <div class="row">
        {% for video in videos %}
        <div class="card" style="
            width: 20%;
            height: 300px;
            margin-left: 30px;
            margin-bottom: 20px;
          ">
          <div style="
            height:100%;
            position: relative;
            overflow: hidden;
          " class="card-img-top">
            <img src="{{video.vid_thumbnail}}" style="
              position: absolute;
              left: 50%;
              top: 50%;
              min-height: 80%;
              width: 100%;
              -webkit-transform: translate(-50%,-50%);
                  -ms-transform: translate(-50%,-50%);
                      transform: translate(-50%,-50%);
            " />
          </div>
          <div class="card-body" style="padding:5px; margin-top:2px;">
            <h5 class="card-title">{{video.vid_title}}</h5>
            <a type="button" {% if choice  ==  "1" %} href="{% url 'videoapp:update' video.vid_id %}" {% else %}
              href="{% url 'managervideo:editvideo' pk=choice cat=cat id=video.vid_id%}" {% endif %}
              class="btn btn-primary btn-sm">Edit</a>
            <a type="button" href="{% url 'managervideo:disablevideo' pk=choice cat=cat id=video.vid_id  %}"
              class=" {% if video.vid_status  ==  1 %}btn btn-primary btn-sm{% else %}btn btn-secondary btn-sm{% endif %} ">
              {% if video.vid_status  ==  1%}
              Disable
              {%else%}
              Enable
              {%endif%}
            </a>

          </div>
        </div>
        {% endfor %}
      </div>
    </div> {% endcomment %}