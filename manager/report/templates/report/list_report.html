{% extends 'main.html' %} {% load static %} {% block style %}
<link
  rel="stylesheet"
  type="text/css"
  href="{% static 'styles/category/category.css' %}"
/>
{% endblock style%} {% block content %}
{% if messages %}
{% for message in messages %}
{% if message.tags == 'success' %}
  <div id="alert-success" class="mt-2 alert alert-light-success color-success alert-dismissible show fade" role="alert">
    {{ message }}
    <button id="close_success" type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
{% elif message.tags == 'error' %}
  <div id="alert-error" class="mt-2 alert alert-light-danger color-danger alert-dismissible show fade" role="alert">
    {{ message }}
    <button id="close_danger" type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
{% endif %}

{% endfor %} 
{% endif %}
<div class="taskbar_comment">
  <h3>Total Report: {{num_reports}}</h3>
  <form
    class="d-flex"
    role="search"
    method="GET"
    action="{% url 'report:report_main' video_id%}"
  >
    {% csrf_token %}
    <input
      class="form-control me-2"
      type="search"
      placeholder="Search or All"
      aria-label="Search"
      name="tv_search_report"
    />
    <button
      class="btn btn-primary"
      type="submit"
      name="btn_search_report"
      style="margin-left: 5px"
    >
      Search
    </button>
  </form>
</div>
<div class="card border" style="padding: 30px">
  <table class="table table_report">
    <thead class="thead-light">
      <tr class="">
        <th class="" scope="col">ID</th>
        <th class="" scope="col">User Name</th>
        <th class="" scope="col">Report Content</th>
        <th class="" scope="col">Status</th>
        <th scope="col"></th>
        <th scope="col"></th>
      </tr>
    </thead>

    <tbody>
      {% for report in list_res %}
      <tr style="height: 10vh">
        <td class="">{{report.report_id}}</td>
        <td class="">{{report.name}}</td>
        <td class="">{{report.report_content}}</td>
        <td class="">{{report.report_status}}</td>
        <td>
          <form action="{% url 'report:detail_report' report.report_id %}">
            <input
              type="image"
              style="width: 20px; height: 20px"
              class="icon_report"
              src="{% static 'styles/images/edit.png' %}"
            />
          </form>
        </td>
        <td>
          <form
            id="form_delete_report"
            action="{% url 'report:delete_report' report.report_id %}"
            method="POST"
          >
            {% csrf_token %}
            <input
              type="image"
              onclick="save()"
              style="width: 20px; height: 20px"
              class="icon_report delete_report"
              src="{% static 'styles/images/delete.png' %}"
              class="icon_report"
            />
          </form>
        </td>
      </tr>
    </tbody>
    {% endfor %}
  </table>
</div>
<nav aria-label="Page navigation example " style="margin-top: 10px">
  <ul class="pagination">
    {% if list_res.has_previous %}
    <li class="page-item">
      <a class="page-link" href="?page=1">&laquo First</a>
    </li>
    <li class="page-item">
      <a class="page-link" href="?page={{list_res.previous_page_number}}"
        >Previous</a
      >
    </li>
    {% endif %} {% for i in nums %}
    <li class="page-item">
      <a class="page-link" href="?page={{forloop.counter}}"
        >{{forloop.counter}}</a
      >
    </li>
    {% endfor %} {% if list_res.has_next %}
    <li class="page-item">
      <a class="page-link" href="?page={{list_res.next_page_number}}">Next</a>
    </li>
    <li class="page-item">
      <a class="page-link" href="?page={{list_res.paginator.num_pages}}"
        >Last &raquo</a
      >
    </li>
    {% endif %}
  </ul>
</nav>

<script>

  form_delete = document.getElementById("form_delete_report");

  form_delete.onsubmit = function(e){
    e.preventDefault();
  }

  function save(){
    if(confirm("Are you sure you want to delete?") == true) {
      form_delete.submit();
    }
  }
    if (document.getElementById('close_success')!=null) {
      var check2 = document.getElementById('close_success');
      var alert2 = document.getElementById('alert-success');
      check2.addEventListener('click', function(e) {   
        alert2.classList.remove('show');
      });
    }
    if (document.getElementById('close_danger')!=null){
      var check1 = document.getElementById('close_danger');
      var alert1 = document.getElementById('alert-error');
      check1.addEventListener('click', function(e) {   
          alert1.classList.remove('show');
      });
    }
</script>

{% endblock content %}



